specVersion: "2.0"
type: application

metadata:
  name: cns-app-web

resources:
  configuration:
    propertiesFileSourceEncoding: UTF-8
builder:
  resources:
    excludes:
      - "test/**"

framework:
  name: OpenUI5
  version: 1.87.10
  libraries:
    - name: sap.ui.core
    - name: sap.m
    - name: sap.f
    - name: sap.uxap
    - name: sap.ui.layout
    - name: sap.ui.unified
    - name: themelib_sap_fiori_3

server:
  customMiddleware:
    - name: replaceConfigMiddleware
      beforeMiddleware: serveResources
    - name: ui5-middleware-livereload
      afterMiddleware: compression
      configuration:
        debug: false
        ext: "xml,json,properties"
        port: 35729
        path: "webapp/controller"
    - name: backboneProxy
      afterMiddleware: compression
      mountPath: /svc

---
# Custom development middleware to replace config version
specVersion: "2.6"
kind: extension
type: server-middleware
metadata:
  name: replaceConfigMiddleware
middleware:
  path: _tools/devMiddleware/replaceConfig.js

---
# Custom development middleware to proxy to a backend specified in an environment variable
specVersion: "2.6"
kind: extension
type: server-middleware
metadata:
  name: backboneProxy
middleware:
  path: _tools/devMiddleware/backboneProxy.js
